<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Kargo Etiketi Telefon NumarasÄ± Arama</title>
    <link rel="stylesheet" href="style.css">
    <!-- html5-qrcode library for barcode scanning -->
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“¦ Kargo Etiketi Telefon NumarasÄ± Arama</h1>
            <p>FotoÄŸraf yÃ¼kleyin veya kamerayÄ± kullanÄ±n, telefon numarasÄ± otomatik algÄ±lansÄ±n</p>
        </header>

        <main>
            <!-- Mod SeÃ§imi -->
            <div class="mode-selector">
                <button class="mode-btn active" id="cameraModeBtn" data-mode="camera">
                    ğŸ“· Kamera
                </button>
                <button class="mode-btn" id="photoModeBtn" data-mode="photo">
                    ğŸ“¸ FotoÄŸraf
                </button>
            </div>

            <!-- Kamera BÃ¶lÃ¼mÃ¼ -->
            <div class="camera-section" id="cameraSection">
                <!-- YardÄ±m Ä°pucu -->
                <div class="help-tip" id="helpTip">
                    <div class="help-icon">ğŸ’¡</div>
                    <div class="help-text">
                        <strong>Ä°pucu:</strong> Barkodu veya etiketi kamera ortasÄ±na getirin. Sistem otomatik algÄ±layacak!
                    </div>
                </div>
                
                <div class="camera-container">
                    <video id="videoElement" autoplay playsinline></video>
                    <canvas id="canvasElement" style="display: none;"></canvas>
                    <!-- Tarama hedef Ã§erÃ§evesi -->
                    <div class="scan-frame" id="scanFrame" style="display: none;">
                        <div class="corner top-left"></div>
                        <div class="corner top-right"></div>
                        <div class="corner bottom-left"></div>
                        <div class="corner bottom-right"></div>
                        <div class="scan-line"></div>
                    </div>
                    <div id="overlayNumbers" class="overlay-numbers"></div>
                </div>
                <div class="camera-controls">
                    <button class="btn btn-primary btn-large" id="startCameraBtn">
                        <span class="btn-icon">ğŸ“·</span>
                        <span class="btn-text">KamerayÄ± BaÅŸlat</span>
                    </button>
                    <button class="btn btn-secondary" id="stopCameraBtn" style="display: none;">
                        <span class="btn-icon">â¹ï¸</span>
                        <span class="btn-text">Durdur</span>
                    </button>
                    <button class="btn btn-primary" id="toggleAutoBtn" style="display: none;">
                        <span class="btn-icon">ğŸ”„</span>
                        <span class="btn-text">Otomatik: KapalÄ±</span>
                    </button>
                </div>
                <div class="status-info" id="statusInfo">
                    <span class="status-icon">â„¹ï¸</span>
                    <span class="status-text">BaÅŸlamak iÃ§in kamerayÄ± aÃ§Ä±n</span>
                </div>
            </div>

            <!-- FotoÄŸraf YÃ¼kleme BÃ¶lÃ¼mÃ¼ -->
            <div class="photo-section" id="photoSection" style="display: none;">
                <div class="upload-area" id="uploadArea">
                    <input type="file" id="fileInput" accept="image/*" capture="environment" hidden>
                    <div class="upload-content">
                        <div class="upload-icon">ğŸ“¸</div>
                        <p class="upload-title">Kargo Etiketi FotoÄŸrafÄ± YÃ¼kleyin</p>
                        <p class="upload-subtitle">SÃ¼rÃ¼kle-bÄ±rak yapÄ±n veya tÄ±klayÄ±n</p>
                        <span class="file-info">âœ“ PNG, JPG, JPEG formatlarÄ± desteklenir</span>
                        <span class="file-info">âœ“ Barkod ve metin otomatik algÄ±lanÄ±r</span>
                    </div>
                </div>

                <div class="preview-section" id="previewSection" style="display: none;">
                    <h2>FotoÄŸraf Ã–nizleme</h2>
                    <div class="image-container">
                        <img id="previewImage" alt="YÃ¼klenen fotoÄŸraf">
                        <div id="photoOverlayNumbers" class="overlay-numbers"></div>
                    </div>
                    <!-- Hidden reader div for barcode scanning -->
                    <div id="reader" style="display: none;"></div>
                    <button class="btn btn-primary btn-large" id="analyzeBtn">
                        <span class="btn-icon">ğŸ”</span>
                        <span class="btn-text">Telefon NumarasÄ±nÄ± AlgÄ±la</span>
                    </button>
                    <button class="btn btn-secondary" id="resetBtn">
                        <span class="btn-icon">ğŸ”„</span>
                        <span class="btn-text">Yeni FotoÄŸraf YÃ¼kle</span>
                    </button>
                </div>
            </div>

            <div class="loading-section" id="loadingSection" style="display: none;">
                <div class="spinner"></div>
                <p id="loadingText">FotoÄŸraf analiz ediliyor...</p>
            </div>
        </main>

        <footer>
            <p>Kargo etiketlerindeki telefon numaralarÄ±nÄ± hÄ±zlÄ±ca bulun ve arayÄ±n</p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>

